<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://domyson.github.io/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://domyson.github.io/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://domyson.github.io/css/github.min.css' />
    <link rel="stylesheet" href='https://domyson.github.io/css/github-style.css' />
    <link rel="stylesheet" href='https://domyson.github.io/css/light.css' />
    <link rel="stylesheet" href='https://domyson.github.io/css/dark.css' />
    <link rel="stylesheet" href='https://domyson.github.io/css/syntax.css' />
    <title>version change - 满船清梦压星河</title>
    
    <link rel="icon" type="image/x-icon" href='/images/avatar.png'>
    
    <meta name="theme-color" content="#1e2327">

    
    <meta name="description"
  content="v1.1.1 Fixed 修复了http一个原子锁问题，但在高并发下可能会出现失败的情况 修复了 skynet.send(string,any) 会产生两次搜索的情况 Added skynet-lua 增加 skynet.trace() 用以输出当前堆栈 skynet-lua 增加 check_version() 函数，校验skynet版本 v1.1.2 Fixed 修复了kill函数重入导致越界的问题
修复http 因为判断发送失败的错误，现在如果发送失败返回404
Mod skynet.send(dst,...) 现在传入参数可以是大于2个，当等于2，与之前无区别，当大于2则会转为table skynet.send() 现在不返回 boolean，而是返回一个number,为0则认为成功 kill 函数现在会立即退出当前服务 killed 事件不会被传入了 v1.2.0 Mod 取消了事件投递到达服务，会给出一个字符串类型的消息发送这类型，用以区别数据的来源位置以及类型
与上述相关的问题，skynet.send(dest,...) 变为了 skynet.send(dest,typ,...) 现第二参数输入你自己的类型，以便于接收者区分，不要和服务同名，那是没有任何意义的 主要是为了确定一种数据的类型，而非一系列服务，本身服务和数据类型并非是一对一的关系
skynet.start -&amp;gt; skynet.uptime
v1.2.1 Mod 现在 skynet.warn,skynet.error,skynet.trace,skynet.debug 支持传入任意类型参数,优化栈分配 Fixed 修复了ucpd 缓冲未释放的问题 Add 增加 skynet.call skynet.reply 是一个组合调用。否则会造成协程被挂起 v1.2.2 Add 增加 bbuf 协议解析，通过 bbuf = require(&amp;quot;skynet.bbuf&amp;quot;) 引用 bbuf errno = bbuf.load(path) 解析文件描述 bytes(userdata),errno = bbuf." />
<meta name="keywords"
  content='computer tech' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://domyson.github.io/post/skynet/version/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="version change - 满船清梦压星河" />
<meta name="twitter:description"
  content="v1.1.1 Fixed 修复了http一个原子锁问题，但在高并发下可能会出现失败的情况 修复了 skynet.send(string,any) 会产生两次搜索的情况 Added skynet-lua 增加 skynet.trace() 用以输出当前堆栈 skynet-lua 增加 check_version() 函数，校验skynet版本 v1.1.2 Fixed 修复了kill函数重入导致越界的问题
修复http 因为判断发送失败的错误，现在如果发送失败返回404
Mod skynet.send(dst,...) 现在传入参数可以是大于2个，当等于2，与之前无区别，当大于2则会转为table skynet.send() 现在不返回 boolean，而是返回一个number,为0则认为成功 kill 函数现在会立即退出当前服务 killed 事件不会被传入了 v1.2.0 Mod 取消了事件投递到达服务，会给出一个字符串类型的消息发送这类型，用以区别数据的来源位置以及类型
与上述相关的问题，skynet.send(dest,...) 变为了 skynet.send(dest,typ,...) 现第二参数输入你自己的类型，以便于接收者区分，不要和服务同名，那是没有任何意义的 主要是为了确定一种数据的类型，而非一系列服务，本身服务和数据类型并非是一对一的关系
skynet.start -&amp;gt; skynet.uptime
v1.2.1 Mod 现在 skynet.warn,skynet.error,skynet.trace,skynet.debug 支持传入任意类型参数,优化栈分配 Fixed 修复了ucpd 缓冲未释放的问题 Add 增加 skynet.call skynet.reply 是一个组合调用。否则会造成协程被挂起 v1.2.2 Add 增加 bbuf 协议解析，通过 bbuf = require(&amp;quot;skynet.bbuf&amp;quot;) 引用 bbuf errno = bbuf.load(path) 解析文件描述 bytes(userdata),errno = bbuf." />
<meta name="twitter:site" content="https://domyson.github.io" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://domyson.github.io">


<meta property="og:type" content="article" />
<meta property="og:title" content="version change - 满船清梦压星河">
<meta property="og:description"
  content="v1.1.1 Fixed 修复了http一个原子锁问题，但在高并发下可能会出现失败的情况 修复了 skynet.send(string,any) 会产生两次搜索的情况 Added skynet-lua 增加 skynet.trace() 用以输出当前堆栈 skynet-lua 增加 check_version() 函数，校验skynet版本 v1.1.2 Fixed 修复了kill函数重入导致越界的问题
修复http 因为判断发送失败的错误，现在如果发送失败返回404
Mod skynet.send(dst,...) 现在传入参数可以是大于2个，当等于2，与之前无区别，当大于2则会转为table skynet.send() 现在不返回 boolean，而是返回一个number,为0则认为成功 kill 函数现在会立即退出当前服务 killed 事件不会被传入了 v1.2.0 Mod 取消了事件投递到达服务，会给出一个字符串类型的消息发送这类型，用以区别数据的来源位置以及类型
与上述相关的问题，skynet.send(dest,...) 变为了 skynet.send(dest,typ,...) 现第二参数输入你自己的类型，以便于接收者区分，不要和服务同名，那是没有任何意义的 主要是为了确定一种数据的类型，而非一系列服务，本身服务和数据类型并非是一对一的关系
skynet.start -&amp;gt; skynet.uptime
v1.2.1 Mod 现在 skynet.warn,skynet.error,skynet.trace,skynet.debug 支持传入任意类型参数,优化栈分配 Fixed 修复了ucpd 缓冲未释放的问题 Add 增加 skynet.call skynet.reply 是一个组合调用。否则会造成协程被挂起 v1.2.2 Add 增加 bbuf 协议解析，通过 bbuf = require(&amp;quot;skynet.bbuf&amp;quot;) 引用 bbuf errno = bbuf.load(path) 解析文件描述 bytes(userdata),errno = bbuf." />
<meta property="og:url" content="https://domyson.github.io/post/skynet/version/" />
<meta property="og:site_name" content="version change" />
<meta property="og:image"
  content="https://domyson.github.io">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2022-04-30 00:00:00 &#43;0000 UTC" />










<script async src="https://www.googletagmanager.com/gtag/js?id=G-V23G8H27BQ"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-V23G8H27BQ');
  
</script>

</head>

<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://domyson.github.io">
        <svg class="octicon" height="32" viewBox="0 0 16 16" version="1.1" width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd"
            d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          <form target="_blank" action="https://www.google.com/search" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
              <input type="hidden" name="q" value="site:https://domyson.github.io">
            </label>
          </form>
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://domyson.github.io">
        <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
          width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>
  
<div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://domyson.github.io">
                  <img class=" avatar-user"
                    src="https://domyson.github.io/images/avatar.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://domyson.github.io">Treasure</a></span><span
                    class="path-divider">/</span><strong class="css-truncate-target mr-1" style="max-width: 410px"><a
                      href="https://domyson.github.io/post/skynet/version/">version change</a></strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Sat, 30 Apr 2022 00:00:00 &#43;0000"
                    class="no-wrap">
                    Sat, 30 Apr 2022 00:00:00 &#43;0000</relative-time>

                  
                  <span class="file-info-divider"></span>
                  Modified <relative-time datetime="Wed, 18 Oct 2023 11:19:03 &#43;0000"
                    class="no-wrap">
                    Wed, 18 Oct 2023 11:19:03 &#43;0000</relative-time>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                    <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                      <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                        <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list">
                        </div>
                      </div>
                    </details-menu>
                      681 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><h1 id="v111">v1.1.1</h1>
<h2 id="fixed">Fixed</h2>
<ul>
<li>修复了<code>http</code>一个原子锁问题，但在高并发下可能会出现失败的情况</li>
<li>修复了 <code>skynet.send(string,any)</code> 会产生两次搜索的情况</li>
</ul>
<h2 id="added">Added</h2>
<ul>
<li>skynet-lua 增加 <code>skynet.trace()</code> 用以输出当前堆栈</li>
<li>skynet-lua 增加 <code>check_version()</code> 函数，校验skynet版本</li>
</ul>
<h1 id="v112">v1.1.2</h1>
<h2 id="fixed-1">Fixed</h2>
<ul>
<li>
<p>修复了<code>kill</code>函数重入导致越界的问题</p>
</li>
<li>
<p>修复<code>http</code> 因为判断发送失败的错误，现在如果发送失败返回404</p>
</li>
</ul>
<h2 id="mod">Mod</h2>
<ul>
<li><code>skynet.send(dst,...)</code> 现在传入参数可以是大于2个，当等于2，与之前无区别，当大于2则会转为<code>table</code></li>
<li><code>skynet.send()</code> 现在不返回 <code>boolean</code>，而是返回一个<code>number</code>,为<code>0</code>则认为成功</li>
<li><code>kill</code> 函数现在会立即退出当前服务</li>
<li><code>killed</code> 事件不会被传入了</li>
</ul>
<h1 id="v120">v1.2.0</h1>
<h2 id="mod-1">Mod</h2>
<ul>
<li>
<p>取消了事件投递到达服务，会给出一个字符串类型的消息发送这类型，用以区别数据的来源位置以及类型</p>
</li>
<li>
<p>与上述相关的问题，<code>skynet.send(dest,...)</code> 变为了 <code>skynet.send(dest,typ,...)</code> 现第二参数输入你自己的类型，以便于接收者区分，不要和服务同名，那是没有任何意义的
主要是为了确定一种数据的类型，而非一系列服务，本身服务和数据类型并非是一对一的关系</p>
</li>
<li>
<p><code>skynet.start</code> -&gt; <code>skynet.uptime</code></p>
</li>
</ul>
<h1 id="v121">v1.2.1</h1>
<h2 id="mod-2">Mod</h2>
<ul>
<li>现在 <code>skynet.warn</code>,<code>skynet.error</code>,<code>skynet.trace</code>,<code>skynet.debug</code> 支持传入任意类型参数,优化栈分配</li>
</ul>
<h2 id="fixed-2">Fixed</h2>
<ul>
<li>修复了<code>ucpd</code> 缓冲未释放的问题</li>
</ul>
<h2 id="add">Add</h2>
<ul>
<li>增加 <code>skynet.call</code> <code>skynet.reply</code> 是一个组合调用。否则会造成协程被挂起</li>
</ul>
<h1 id="v122">v1.2.2</h1>
<h2 id="add-1">Add</h2>
<ul>
<li>增加 <code>bbuf</code> 协议解析，通过 <code>bbuf = require(&quot;skynet.bbuf&quot;)</code> 引用</li>
<li><code>bbuf</code>
<ul>
<li><code>errno = bbuf.load(path)</code> 解析文件描述</li>
<li><code>bytes(userdata),errno = bbuf.marshal(string,tab)</code> 按指定文件编码<code>table</code></li>
<li><code>errno = bbuf.unmarshal(string,bytes(userdata),tab)</code> 按指定文件解码 <code>bytes</code> 解码为 <code>table</code></li>
</ul>
</li>
</ul>
<h2 id="fixed-3">Fixed</h2>
<ul>
<li>修复<code>skynet.call</code> 的一个状态判定问题</li>
</ul>
<h1 id="v123">v1.2.3</h1>
<h2 id="fixed-4">Fixed</h2>
<ul>
<li>
<p>修复<code>http</code>的一个判断bug</p>
</li>
<li>
<p>优化<code>skynetcmd</code>传输逻辑，以及连接逻辑</p>
</li>
<li>
<p><code>skynet.call</code>,<code>skynet.send</code> 现在支持远程调用</p>
</li>
</ul>
<h1 id="v124">v1.2.4</h1>
<h2 id="fixed-5">Fixed</h2>
<ul>
<li>
<p>集群减少了每条连接 <code>64byte</code> 的额外分配</p>
</li>
<li>
<p>缩减了调用方法深度</p>
</li>
<li>
<p>减少了类型断言的次数</p>
</li>
</ul>
<p>#v1.3.1</p>
<p>todo</p>
<p>#1.3.6</p>
<p>todo</p>
<h1 id="140">1.4.0</h1>
<h2 id="add-2">ADD</h2>
<ul>
<li>
<p>ini 解析器</p>
</li>
<li>
<p>lua协程池</p>
</li>
<li>
<p>lua-socket beta版本</p>
</li>
</ul>
<h2 id="fixed-6">FIXED</h2>
<ul>
<li>修复 <code>skynet.call()</code> 会造成当前虚拟机全部阻塞的bug</li>
</ul>
<h2 id="modify">Modify</h2>
<ul>
<li>
<p>自动对消息类型分类</p>
</li>
<li>
<p>重构http</p>
</li>
</ul>
<h2 id="remove">Remove</h2>
<ul>
<li>
<p>删除 Alive(pid)</p>
</li>
<li>
<p>删除 <code>check_version()</code></p>
</li>
</ul>
</article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script type="application/javascript" src='https://domyson.github.io/js/toc.js'></script>
<link rel="stylesheet" href='https://domyson.github.io/css/toc.css' />


  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://domyson.github.io">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>
</body>

<script type="application/javascript" src="https://domyson.github.io/js/github-style.js"></script>




</html>